!function(e){e.fn.flipster=function(t){var i="string"==typeof t?!0:!1;if(i)var n=t,l=Array.prototype.slice.call(arguments,1);else var a={itemContainer:"ul",itemSelector:"li",style:"coverflow",start:"center",enableKeyboard:!0,enableMousewheel:!0,enableTouch:!0,enableNav:!1,enableNavButtons:!1,onItemSwitch:e.noop,disableRotation:!1,navPosition:"before",prevText:"Previous",nextText:"next"},r=e.extend({},a,t),s=e(window);return this.each(function(){function t(){D=0}function a(){m.height(f()),g.css("height","auto"),"carousel"===r.style&&m.width(y.width())}function f(){var t=0;return y.each(function(){e(this).height()>t&&(t=e(this).height())}),t}function o(){if(r.enableNav&&y.length>1){var t=[],i=[],n=[];y.each(function(){var l=e(this).data("flip-category"),a=e(this).attr("id"),r=e(this).attr("title");if("undefined"!=typeof l&&e.inArray(l,t)<0&&(t.push(l),n[l]='<li class="flip-nav-category"><a href="#" class="flip-nav-category-link" data-flip-category="'+l+'">'+l+'</a>\n<ul class="flip-nav-items">\n'),e.inArray(a,i)<0){i.push(a);var s='<a href="#'+a+'" class="flip-nav-item-link">'+r+"</a></li>\n";"undefined"!=typeof l?n[l]=n[l]+'<li class="flip-nav-item">'+s:n[a]='<li class="flip-nav-item no-category">'+s}});var l='<ul class="flipster-nav">\n';for(var a in t)n[t[a]]=n[t[a]]+"</ul>\n</li>\n";for(var s in n)l+=n[s];l+="</ul>",C="after"!=r.navPosition.toLowerCase()?e(l).prependTo(g):e(l).appendTo(g),x=C.find("a").on("click",function(t){var i;i=e(this).hasClass("flip-nav-category-link")?y.filter("[data-flip-category='"+e(this).data("flip-category")+"']"):e(this.hash),i.length&&(h(i),t.preventDefault())})}}function p(){if(r.enableNav&&y.length>1){var t=e(y[T]);C.find(".flip-nav-current").removeClass("flip-nav-current"),x.filter("[href='#"+t.attr("id")+"']").addClass("flip-nav-current"),x.filter("[data-flip-category='"+t.data("flip-category")+"']").parent().addClass("flip-nav-current")}}function c(){r.enableNavButtons&&y.length>1&&(g.find(".flipto-prev, .flipto-next").remove(),g.append("<a href='#' class='flipto-prev'>"+r.prevText+"</a> <a href='#' class='flipto-next'>"+r.nextText+"</a>"),g.children(".flipto-prev").on("click",function(e){h("left"),e.preventDefault()}),g.children(".flipto-next").on("click",function(e){h("right"),e.preventDefault()}))}function d(){var t=e(y[T]).addClass("flip-current");if(y.removeClass("flip-prev flip-next flip-current flip-past flip-future no-transition"),"carousel"===r.style){y.addClass("flip-hidden");var i=e(y[T+1]),n=e(y[T+2]),l=e(y[T-1]),s=e(y[T-2]);0===T?(l=y.last(),s=l.prev()):1===T?s=y.last():T===y.length-2?n=y.first():T===y.length-1&&(i=y.first(),n=e(y[1])),n.removeClass("flip-hidden").addClass("flip-future"),s.removeClass("flip-hidden").addClass("flip-past"),i.removeClass("flip-hidden").addClass("flip-next"),l.removeClass("flip-hidden").addClass("flip-prev")}else{var f=t.outerWidth()/2,o=0,c=m.width(),d=t.outerWidth(),h=y.index(t)*d/2+f/2;y.removeClass("flip-hidden");for(var u=0;u<y.length;u++){var v=e(y[u]),g=v.outerWidth();T>u?v.addClass("flip-past").css({"z-index":u,left:u*g/2+"px"}):u>T&&v.addClass("flip-future").css({"z-index":y.length-u,left:u*g/2+f+"px"})}t.css({"z-index":y.length+1,left:h+"px"}),o=h+d/2-c/2;var C=-1*o+"px";if(w){var x=e(".flip-past"),b=e(".flip-future");for(e(".flip-current").css("zoom","1.0"),u=0;u<x.length;u++)e(x[u]).css("zoom",100-5*(x.length-u)+"%");for(u=0;u<b.length;u++)e(b[u]).css("zoom",100-5*(u+1)+"%");m.animate({left:C},333)}else m.css("left",C)}t.addClass("flip-current").removeClass("flip-prev flip-next flip-past flip-future flip-hidden"),a(),p(),r.onItemSwitch.call(this)}function h(e){y.length>1&&("left"===e?T>0?T--:T=y.length-1:"right"===e?T<y.length-1?T++:T=0:T="number"==typeof e?e:y.index(e),d())}function u(){g.addClass("flipster flipster-active flipster-"+r.style).css("visibility","hidden"),r.disableRotation&&g.addClass("no-rotate"),m=g.find(r.itemContainer).addClass("flip-items"),y=m.find(r.itemSelector).addClass("flip-item flip-hidden").wrapInner("<div class='flip-content' />");var i=!1,n=document.createElement("b");n.innerHTML="<!--[if IE 9]><i></i><![endif]-->";var l=1===n.getElementsByTagName("i").length;(i||l)&&(w=!0,m.addClass("compatibility")),o(),c(),r.start&&y.length>1&&(T="center"===r.start?!y.length%2?y.length/2+1:Math.floor(y.length/2):r.start),a(),g.hide().css("visibility","visible").fadeIn(400,function(){d()}),s.resize(function(){a(),d()}),y.on("click",function(t){e(this).hasClass("flip-current")||t.preventDefault(),h(y.index(this))}),r.enableKeyboard&&y.length>1&&(s.on("keydown.flipster",function(e){if(D++,0===D%7||1===D){var t=e.which;37===t?(e.preventDefault(),h("left")):39===t&&(e.preventDefault(),h("right"))}}),s.on("keyup.flipster",function(){D=0})),r.enableMousewheel&&y.length>1&&g.on("mousewheel.flipster",function(e){b=window.setTimeout(t,500),D++,(0===D%4||1===D)&&(window.clearTimeout(b),e.originalEvent.wheelDelta/120>0?h("left"):h("right"),e.preventDefault())}),r.enableTouch&&y.length>1&&(g.on("touchstart.flipster",function(e){k=e.originalEvent.targetTouches[0].screenX}),g.on("touchmove.flipster",function(e){e.preventDefault();var t=e.originalEvent.targetTouches[0].screenX,i=t-k;i>y[0].clientWidth/1.75?(h("left"),k=t):i<-1*(y[0].clientWidth/1.75)&&(h("right"),k=t)}),g.on("touchend.flipster",function(){k=0}))}var v,g=e(this);if(i)return v=g.data("methods"),v[n].apply(this,l);var m,y,C,x,b,w,T=0,k=0,D=0;v={jump:h},g.data("methods",v),g.hasClass("flipster-active")||u()})}}(jQuery);