var Jarallax=function(t){if(this.FPS=24,this.FPS_INTERVAL=1e3/this.FPS,this.FRAME_DATA_SAMPLE=24,this.FRAME_DATA_REFRESH=12,this.fpsTop=0,this.fpsBottom=1e3,this.animations=[],this.defaultValues=[],this.progress=0,this.prev_progress=0,this.controllers=[],this.maxProgress=1,this.timer=void 0,this.allowWeakProgress=!0,this.frameRate=this.FPS,this.stepSize=0,this.jumping=!1,void 0===t)$.browser.iDevice?this.controllers.push(new ControllerApple(!1)):$.browser.mozilla?this.controllers.push(new ControllerScroll(!1)):this.controllers.push(new ControllerScroll(!0));else if("none"!==t)if(t.length)this.controllers=t;else{if("object"!=typeof t)throw new Error('wrong controller data type: "'+typeof t+'". Expected "object" or "array"');this.controllers.push(t)}for(var e in this.controllers)this.controllers[e].activate(this);this.frameChart=[];for(var r=1;600>=r;r++)this.frameChart[r]=1e3/r};Jarallax.prototype.setProgress=function(t,e){if(t=t>1?1:0>t?0:Math.round(1e3*t)/1e3,this.progress!=t&&(this.progress=t,this.allowWeakProgress||!r)){this.previousTime=new Date,this.currentTime=new Date;var r=e||!1;for(var o in this.defaultValues)this.defaultValues[o].activate(this.progress);for(var s in this.animations)this.animations[s].activate(this.progress);for(var a in this.controllers)this.controllers[a].update(this.progress);this.currentTime=new Date,this.stepSize=Math.max(this.currentTime-this.previousTime,this.stepSize)}},Jarallax.prototype.clearAnimations=function(){this.animations=[]},Jarallax.prototype.clearDefaults=function(){this.defaultValues=[]},Jarallax.prototype.clearControllers=function(){this.controllers=[]},Jarallax.prototype.jumpToProgress=function(t,e,r){return t.indexOf?-1!=t.indexOf("%")&&(t=parseFloat(t)/100):t/=this.maxProgress,t==this.progress?!1:(t>1?t=1:0>t&&(t=0),this.smoothProperties={},this.smoothProperties.timeStep=1e3/r,this.smoothProperties.steps=e/this.smoothProperties.timeStep,this.smoothProperties.currentStep=0,this.smoothProperties.startProgress=this.progress,this.smoothProperties.diffProgress=t-this.progress,this.smoothProperties.previousValue=this.progress,this.smooth(),this.allowWeakProgress=!1,!1)},Jarallax.prototype.smooth=function(t){var e;if(e=t?t:this,e.smoothProperties.currentStep++,clearTimeout(e.timer),e.smoothProperties.currentStep<e.smoothProperties.steps){var r=e.smoothProperties.currentStep/e.smoothProperties.steps,o=Jarallax.EASING.easeOut(r,e.smoothProperties.startProgress,e.smoothProperties.diffProgress,1,5);e.jumping_allowed=!0,e.setProgress(o),e.jumping_allowed=!1,e.timer=window.setTimeout(function(){e.smooth(e)},e.smoothProperties.timeStep),e.smoothProperties.previousValue=o,e.allowWeakProgress=!1}else e.jumping_allowed=!0,e.setProgress(e.smoothProperties.startProgress+e.smoothProperties.diffProgress),e.jumping_allowed=!1,e.clearSmooth(e)},Jarallax.prototype.clearSmooth=function(t){t.allowWeakProgress=!0,clearTimeout(t.timer),delete t.smoothProperties},Jarallax.prototype.setDefault=function(t,e){if(!t)throw new Error("no selector defined.");if(JarallaxTools.isValues(e)){var r=new JarallaxObject(t,e);r.activate(),this.defaultValues.push(r)}},Jarallax.prototype.addStatic=function(t,e){if(!t)throw new Error("no selector defined.");if(JarallaxTools.isValues(e)){var r=new JarallaxStatic(t,e[0],e[1]);this.defaultValues.push(r)}},Jarallax.prototype.addCounter=function(t){this.animations.push(new JarallaxCounter(this,t))},Jarallax.prototype.addController=function(t,e){this.controllers.push(t),e&&t.activate(this)},Jarallax.prototype.addAnimation=function(t,e,r,o){if(r=r?r.substring?[r]:r||[JarallaxTools.Platform.Any]:["any"],JarallaxTools.PlatformAllowed(r,o)){var s;if(!t)throw new Error("no selector defined.");var a=[];if(JarallaxTools.isValues(e))if(e.length)for(var i=0;i<e.length-1;i++){if(!e[i]||!e[i+1])throw new Error("bad animation data.");if(!e[i].progress||!e[i+1].progress)throw new Error("no animation boundry found.");-1==e[i+1].progress.indexOf("%")&&this.maxProgress<e[i+1].progress&&(this.maxProgress=e[i+1].progress),s=new JarallaxAnimation(t,e[i],e[i+1],this),this.animations.push(s),a.push(s)}else{e.progress||(e.progress="100%");var l={};for(var n in e)l[n]=$(t).css(n);l.progress="0%",s=new JarallaxAnimation(t,l,e,this),this.animations.push(s),a.push(s)}return a}return!1},Jarallax.prototype.cloneAnimation=function(t,e,r){if(!t)throw new Error("no selector defined.");for(var o=[],s=[],a=0;a<r.length+1;a++)e instanceof Array?s.push(e[a]):s.push(e);for(a=0;a<r.length;a++){var i=r[a],l=JarallaxTools.clone(i.startValues),n=JarallaxTools.clone(i.endValues),h=s[a],p=s[a+1];for(var c in l)h[c]&&(l[c]=JarallaxTools.calculateNewValue(h[c],l[c]));for(var u in n)p[u]&&(n[u]=JarallaxTools.calculateNewValue(p[u],n[u]));o.push(this.addAnimation(t,[l,n])[0])}return o},Jarallax.EASING={linear:function(t,e,r,o){return t/o*r+e},easeOut:function(t,e,r,o,s){return void 0===s&&(s=2),(-1*Math.pow((o-t)/o,s)+1)*r+e},easeIn:function(t,e,r,o,s){return void 0===s&&(s=2),Math.pow(t/o,s)*r+e},easeInOut:function(t,e,r,o,s){return void 0===s&&(s=2),r/=2,t*=2,o>t?Math.pow(t/o,s)*r+e:(t-=o,(-1*Math.pow((o-t)/o,s)+1)*r+e+r)}},Jarallax.EASING.none=Jarallax.EASING.linear,JarallaxTools={},JarallaxTools.hasNumbers=function(t){var e=new RegExp("\\d");return e.test(t)},JarallaxTools.isValues=function(t){if(!t)throw new Error("no values set.");if("object"!=typeof t)throw new Error('wrong data type values. expected: "object", got: "'+typeof t+'"');if(0===t.size)throw new Error("Got an empty values object");return!0},JarallaxTools.PlatformAllowed=function(t,e,r){e=e||!1,r=r||!1;for(var o=0;o<t.length;o++){if("any"==t[o])return!r;if(jQuery.browser[t[o]]){if(!e)return!r}else if(e)return r}return r?!e:e},JarallaxTools.calculateNewValue=function(t,e){var r,o=JarallaxTools.getUnits(e);return r=0===t.indexOf("+")?String(parseFloat(e)+parseFloat(t)+o):0===t.indexOf("-")?String(parseFloat(e)+parseFloat(t)+o):0===t.indexOf("*")?String(parseFloat(e)*parseFloat(t.substr(1))+o):0===t.indexOf("/")?String(parseFloat(e)/parseFloat(t.substr(1))+o):t,e.indexOf&&e.indexOf("%")>0?r+"%":r},JarallaxTools.getUnits=function(t){return t.replace(/\d+/g,"")},JarallaxTools.clone=function(t){var e={};for(var r in t)e[r]=t[r];return e},Position=function(t,e){this.x=t,this.y=e},Position.prototype.add=function(t){return new Position(this.x+t.x,this.y+t.y)},Position.prototype.subract=function(t){return new Position(this.x-t.x,this.y-t.y)},JarallaxTools.Platforms=["webkit","opera","msie","mozilla","android","blackBerry","webOs","windowsPhone","iDevice","iPad","iPhone","iPod","msie","mobile","nonMobile"],jQuery.browser.android=/android/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.blackBerry=/blackberry/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.webOs=/webos/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.windowsPhone=/windows phone/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.iDevice=/ipad|iphone|ipod/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.iPad=/ipad/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.iPhone=/iphone/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.iPod=/ipod/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackBerry||jQuery.browser.webOs||jQuery.browser.windowsPhone||jQuery.browser.iDevice,jQuery.browser.nonMobile=!jQuery.browser.mobile,jQuery.platform={},jQuery.platform.windows=-1!=navigator.appVersion.indexOf("Win"),jQuery.platform.macOs=-1!=navigator.appVersion.indexOf("Mac"),jQuery.platform.unix=-1!=navigator.appVersion.indexOf("X11"),jQuery.platform.linux=-1!=navigator.appVersion.indexOf("Linux"),jQuery.platform.unknown=!(jQuery.platform.windows||jQuery.platform.macOs||jQuery.platform.unix||jQuery.platform.linux),JarallaxController=function(){this.isActive=!1,this.bindings=[]},JarallaxController.prototype.activate=function(t){this.isActive=!0,this.jarallax&&this.jarallax===t||(this.jarallax=t)},JarallaxController.prototype.deactivate=function(){this.isActive=!1},JarallaxController.prototype.update=function(){},JarallaxCounter=function(t,e){if(!e)throw new Error("No properties defined.");if(!e.selector)throw new Error("No selector defined. properties.selector.");this.jarallax=t,this.selector=e.selector,this.startNumber=e.startNumber||0,this.endNumber=e.endNumber||100,this.startProgress=e.startProgress||"0%",this.endProgress=e.endProgress||"100%",this.decimals=e.decimals||0,this.stepSize=e.stepSize,0===this.decimals&&this.stepSize<1&&(tmp=this.stepSize.toString().split("."),this.decimals=tmp[1].length)},JarallaxCounter.prototype.activate=function(){var t=this.endNumber-this.startNumber;if(t*this.jarallax.progress+this.startNumber,this.startProgress.indexOf("%")>=0?start=parseInt(this.startProgress,10)/100:JarallaxTools.hasNumbers(this.startProgress)&&(start=parseInt(this.startProgress,10)/this.jarallax.maxProgress),this.endProgress.indexOf("%")>=0?end=parseInt(this.endProgress,10)/100:JarallaxTools.hasNumbers(this.endProgress)&&(end=parseInt(this.endProgress,10)/this.jarallax.maxProgress),this.jarallax.progress<start)$(this.selector).html(this.startNumber);else if(this.jarallax.progress>end)$(this.selector).html(this.endNumber);else{var e=end-start,r=this.jarallax.progress-start,o=this.endNumber-this.startNumber,s=Jarallax.EASING.none(r,this.startNumber,o,e);this.stepSize&&(s=Math.round(s/this.stepSize)*this.stepSize),this.decimals>0&&(s=s.toFixed(this.decimals)),$(this.selector).html(s)}},JarallaxObject=function(t,e){this.selector=t,this.values=e},JarallaxObject.prototype.activate=function(){for(var t in this.values)$(this.selector).css(t,this.values[t])},JarallaxAnimation=function(t,e,r,o){this.progress=-1,this.selector=t,this.startValues=e,this.endValues=r,this.jarallax=o},JarallaxAnimation.prototype.activate=function(t){if(this.progress!=t){var e,r,o;if(o=void 0===this.startValues.style?{easing:"linear"}:this.startValues.style,this.startValues.progress.indexOf("%")>=0?e=parseInt(this.startValues.progress,10)/100:JarallaxTools.hasNumbers(this.startValues.progress)&&(e=parseInt(this.startValues.progress,10)/this.jarallax.maxProgress),this.endValues.progress.indexOf("%")>=0?r=parseInt(this.endValues.progress,10)/100:JarallaxTools.hasNumbers(this.endValues.progress)&&(r=parseInt(this.endValues.progress,10)/this.jarallax.maxProgress),this.startValues.event&&this.dispatchEvent(this.progress,t,e,r),t>=e&&r>=t)for(var s in this.startValues)if("progress"!==s&&"style"!==s&&"event"!==s)if(void 0!==this.endValues[s]&&"display"!==s&&"backgroundImage"!==s){var a=JarallaxTools.getUnits(this.startValues[s]+"");a=a.replace("-","");var i=parseFloat(this.startValues[s]),l=parseFloat(this.endValues[s]),n=r-e,h=t-e,p=l-i,c=Jarallax.EASING[o.easing](h,i,p,n,o.power);"px"==a&&(c=parseInt(c,10)),"."!==a&&(c+=a),$(this.selector).css(s,c)}else $(this.selector).css(s,this.startValues[s]);this.progress=t}},JarallaxAnimation.prototype.dispatchEvent=function(t,e,r,o){var s=this.startValues.event,a={};a.animation=this,a.selector=this.selector,e>=r&&o>=e?(s.start&&r>t&&(a.type="start",s.start(a)),s.start&&t>o&&(a.type="rewind",s.start(a)),s.animating&&(a.type="animating",s.animating(a)),s.forward&&e>t&&(a.type="forward",s.forward(a)),s.reverse&&t>e&&(a.type="reverse",s.reverse(a))):(s.complete&&o>t&&e>o&&(a.type="complete",s.complete(a)),s.rewinded&&t>r&&r>e&&(a.type="rewind",s.rewinded(a)))},ControllerApple=function(t){this.scrollPage=void 0===t?!0:t,this.target=$("body"),this.scrollPostion=new Position(0,0)},ControllerApple.prototype=new JarallaxController,ControllerApple.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.scrollSpace=$("body").height()-$(window).height(),this.target.bind("touchmove",{scope:this},this.onMove),this.target.bind("touchstart",{scope:this},this.onTouch)},ControllerApple.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),this.target.unbind("touchmove"),this.target.unbind("touchstart")},ControllerApple.prototype.onTouch=function(t){var e=t.data.scope,r=t.originalEvent.touches.item(0);e.startPosition=new Position(r.clientX,r.clientY),t.preventDefault()},ControllerApple.prototype.onMove=function(t){var e=t.data.scope,r=t.originalEvent.touches.item(0),o=new Position(r.clientX,r.clientY),s=o.subract(e.startPosition);e.startPosition=o,e.scrollPostion=s.add(e.scrollPostion),e.scrollPostion.y=Math.max(Math.min(e.scrollPostion.y,0),-e.scrollSpace),e.jarallax.setProgress(-e.scrollPostion.y/e.scrollSpace,!1),$("body").scrollTop(e.scrollSpace*e.jarallax.progress),e.scrollPage||t.preventDefault()},ControllerApple.prototype.update=function(t){this.position.y=Math.round(t*this.scrollSpace)},ControllerMobile=function(t,e){this.disableDefault=t||!1,this.y=0,this.previousY=void 0,this.height=e},ControllerMobile.prototype=new JarallaxController,ControllerMobile.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.height||(this.height=this.height=parseInt($("body").css("height"),10),this.height==$(window).height&&(this.height=parseInt($("#wrapper").css("height"),10))),$("body").bind("touchmove",{scope:this},this.onTouchMove),$("body").bind("touchend",{scope:this},this.onTouchEnd)},ControllerMobile.prototype.onTouchEnd=function(){this.previousY=void 0},ControllerMobile.prototype.onTouchMove=function(t,e){if(this.isActive){this.disableDefault&&t.preventDefault();var r=t.data.scope,o=e?t:t.originalEvent.touches.item(0);void 0===r.previousY?r.previousY=o.clientY:(r.y+=o.clientY-r.previousY,r.y=r.y<r.height?r.y:r.height,r.y=r.y>0?r.y:0,r.previousY=o.clientY,r.y/r.height,r.jarallax.setProgress(r.y/r.height))}},ControllerMobile.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),$("body").unbind("touchmove")},ControllerMobile.prototype.update=function(){},ControllerScroll=function(t,e){this.target=$(window),$(window).scrollTop(0),this.height=parseInt($("body").css("height"),10),this.scrollSpace=e||this.height-this.target.height(),this.scrollSpace<10&&(this.height=parseInt($("#wrapper").css("height"),10),this.scrollSpace=this.height-this.target.height()),this.smoothing=t||!1,this.targetProgress=0},ControllerScroll.prototype=new JarallaxController,ControllerScroll.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.target.bind("scroll",{scope:this},this.onScroll)},ControllerScroll.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),this.target.unbind("scroll")},ControllerScroll.prototype.onScroll=function(t){var e=t.data.scope;if(e.jarallax.jumping&&(e.jarallax.jumping_allowed||e.jarallax.clearSmooth(e.jarallax)),e.isActive){var r=t.data.y||e.target.scrollTop(),o=r/e.scrollSpace;e.smoothing?(e.targetProgress=o,e.smooth()):e.jarallax.setProgress(o,!0)}},ControllerScroll.prototype.smooth=function(t){var e;e=t?t:this;var r=e.jarallax.progress,o=e.targetProgress-r;if(clearTimeout(e.timer),o>1e-4||-1e-4>o){var s=r+o/5;e.timer=window.setTimeout(function(){e.smooth(e)},e.jarallax.FPS_INTERVAL),e.jarallax.setProgress(s,!0)}else e.jarallax.setProgress(e.targetProgress,!0)},ControllerScroll.prototype.update=function(t){var e=t*this.scrollSpace;this.jarallax.allowWeakProgress||$(window).scrollTop(e)},ControllerDrag=function(t,e,r){this.object=$(t),this.start=e,this.end=r,this.container="",this.width=0,this.startX=0,this.startY=0},ControllerDrag.prototype=new JarallaxController,ControllerDrag.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.container="#scrollbar",this.object.draggable({containment:this.container,axis:"x"}),this.object.bind("drag",{scope:this},this.onDrag),this.container=$(this.container),this.width=$(this.container).innerWidth()-this.object.outerWidth()},ControllerDrag.prototype.onDrag=function(t){var e=t.data.scope;if(e.isActive){var r=parseInt($(this).css("left"),10),o=r/t.data.scope.width;t.data.scope.jarallax.setProgress(o)}},ControllerDrag.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),this.object.unbind("drag"),this.object.draggable("destroy")},ControllerDrag.prototype.update=function(t){this.object.css("left",t*this.width)},ControllerKeyboard=function(t,e,r){this.repetitiveInput=r,this.preventDefault=e||!1,this.keys=t||{38:-.01,40:.01},this.keysState={}},ControllerKeyboard.prototype=new JarallaxController,ControllerKeyboard.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),$(document.documentElement).keydown({scope:this},this.keyDown),$(document.documentElement).keyup({scope:this},this.keyUp);for(var e in this.keys)this.keysState[e]=!1},ControllerKeyboard.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t)},ControllerKeyboard.prototype.keyDown=function(t){var e=t.data.scope;if(e.isActive)for(var r in e.keys)r==t.keyCode&&((e.keysState[r]!==!0||e.repetitiveInput)&&e.jarallax.setProgress(e.jarallax.progress+e.keys[r]),e.keysState[r]=!0,e.preventDefault&&t.preventDefault())},ControllerKeyboard.prototype.keyUp=function(t){if(this.isActive){var e=t.data.scope;for(var r in e.keys)r==t.keyCode&&(e.keysState[r]=!1)}},ControllerKeyboard.prototype.update=function(){},ControllerTime=function(t,e,r){this.interval=e,this.speed=t,this.playForward=!0,this.type=r||ControllerTime.TYPES.NORMAL},ControllerTime.prototype=new JarallaxController,ControllerTime.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.progress=0,this.timer=setInterval(this.onInterval.bind(this,{scope:this}),this.interval)},ControllerTime.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),clearInterval(this.timer)},ControllerTime.prototype.onInterval=function(t){if(t.scope,this.isActive){if(this.playForward?this.progress+=this.speed:this.progress-=this.speed,this.progress>=1)switch(this.type){case ControllerTime.TYPES.NORMAL:this.progress=1,this.deactivate(this.jarallax);break;case ControllerTime.TYPES.LOOP:this.progress=0;break;case ControllerTime.TYPES.BOUNCE:this.progress=1-this.speed,this.playForward=!1}else this.progress<=0&&(this.progress=0+this.speed,this.playForward=!0);this.jarallax.setProgress(this.progress)}},ControllerTime.TYPES={NORMAL:0,LOOP:1,BOUNCE:2},ControllerTime.prototype.update=function(t){this.progress=t},ControllerMousewheel=function(t,e){this.sensitivity=-t,this.preventDefault=e||!1},ControllerMousewheel.prototype=new JarallaxController,ControllerMousewheel.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),$("body").bind("mousewheel",{scope:this},this.onScroll)},ControllerMousewheel.prototype.deactivate=function(t){$("body").unbind("mousewheel"),JarallaxController.prototype.deactivate(this,t)},ControllerMousewheel.prototype.onScroll=function(t,e){var r=t.data.scope;r.isActive&&(r.jarallax.setProgress(r.jarallax.progress+r.sensitivity*e),r.preventDefault&&t.preventDefault())},ControllerMousewheel.prototype.update=function(){};